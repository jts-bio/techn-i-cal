{% extends 'base.html' %}



    

{% block content %}

    

    <div class="text text-center w-full">
        <h1 class="text-2xl font-extrabold text-amber-400 shadow shadow-lg">{{ shift }} Preference Ratings</h1>
    </div>
    <div class="panel grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 xl:grid-cols-7 gap-12">
        {% for rating in shift.rel_prefs.all %}

            <div class="object shadow shadow-lg {{ rating.css__all }}"
                data-object-link="{{ rating.employee.url }}"
                data-object-type="employee"
                onmouseenter="emplMouseEnter(event, '{{ rating.employee.url }}', '{{ rating.employee.slug }}')"
                onmouseleave='emplMouseLeave(event)'>
                <div class="text-black">
                    <div class="font-extrabold text-2xl text-black"> 
                        {{ rating.priority }} 
                    </div>
                    {{ rating.employee }}
                </div>
            </div>

        {% endfor %}
    </div>

    <hr/>

    <div class="text text-center w-full">
        <h1 class="text-2xl font-extrabold text-amber-400 shadow shadow-lg">Sorted-Shift Ratings</h1>
    </div>
    <div class="flex flex-row flex-wrap gap-5 py-5">
        {% for rating in shift.sort_prefs.all %}
    
            <div class="bg-zinc-900 border border-zinc-200 bg-opacity-75 rounded h-12 px-3 drop-shadow">
                {{ rating.employee }}
                <span class="bg-white text-xl font-bold text-black h-7 w-7 px-1 rounded">{{ rating.scaled }}%</span>
            </div>

        {% endfor %}

    </div> 


    <div id="contextMenu" class="my-context-menu bg-zinc-900 bg-opacity-75 rounded" style="display: none"> 
        <ul class="mx-1"> 
            <li class="h-5 rounded-sm hover:bg-zinc-200 hover:bg-opacity-30 text-xs my-1 w-100 transition">
                <a><i class="fas fa-smile text-xs px-2"></i> Strongly Prefer</a>
            </li>
            <li class="h-5 rounded-sm hover:bg-zinc-200 hover:bg-opacity-30 my-1 w-100 transition"><a id="goToContextAnchor" class="text-xs" href="#"><i class="fa fa-share text-xs px-2"></i> View </a></li> 
            <li class="h-5 rounded-sm hover:bg-zinc-200 hover:bg-opacity-30 my-1 w-100 transitioh"><a class="text-xs" href="#"><i class="fa fa-trash text-xs px-2"></i> Delete</a></li> 
        </ul> 
    </div> 

    <script>
       document.onclick = hideMenu; 
       document.oncontextmenu = rightClick;

       var customContextMenu = false;
       var urlEmployee = "#";
       var nameEmployee = "";


        function emplMouseEnter (event, url, name) {
            console.log("Mouse enter");
            $customContextMenu = true;
            $urlEmployee = url;
            $nameEmployee = name;
            console.log($customContextMenu);
        }
        function emplMouseLeave (event) {
            $customContextMenu = false;
            console.log($customContextMenu);
        }

        function hideMenu (event) {
            let menu = document.getElementById("contextMenu");
            menu.style.display = "none";
        }
        function rightClick (event) {
            if ($customContextMenu === true) {
                event.preventDefault();
                console.log(event.target.dataset.objectLink);
                let menu = document.getElementById("contextMenu");
                menu.style.display = "block";
                menu.style.position = "absolute";
                menu.style.left = event.pageX + "px";
                menu.style.top = event.pageY + "px";
                let anchor = document.getElementById("goToContextAnchor");
                anchor.href = $urlEmployee;
                anchor.innerHTML = `<i class="fa fa-user text-xs mr-1" aria-hidden="true"></i>` + "View " + $nameEmployee;
            } 
        }

    
            
    
    </script>

{% endblock content %}


    