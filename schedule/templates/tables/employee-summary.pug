script(type="text/hyperscript").
   behavior RemovePrnEmployee
      on click
         set name to my [@data-name] 
         set slug to my [@data-slug]
         call confirm(`Are you sure you want to remove ${name} from the schedule? This cannot be undone.`)
         if result is true
            fetch `actions/remove-employee/${slug}/`
            with method:'POST'
            then set response to result
            then call showToast(response)
            then tell my.parentNode
               remove you 
               end

mixin FteBadge(fte)
   div.rounded-b-lg.px-2.bg-amber-500.text-amber-900.text-sm.px-1 #{employee.fte} FTE

mixin PrnBadge()
   div.rounded-b-lg.px-2.bg-zinc-500.text-zinc-900.text-sm.px-1 PRN

//- ========================
//- Employee Summary
//- ========================

.grid.grid-cols-3.gap-4(class="lg:grid-cols-4")

   each employee in employees
      div.bg-zinc-100.bg-opacity-50.rounded-lg.relative
         h3.text-lg.font-light.px-2= employee.name

         if employee.fte == 0
            i.text-zinc-900.p-2.fas.fa-x.opacity-40.absolute.right-0.top-0(
               data-name= employee.name
               data-slug= employee.slug
               _="install RemovePrnEmployee"
               class="hover:opacity-100")

         if employee.fte != 0
            +FteBadge(employee.fte)
         else
            +PrnBadge()
